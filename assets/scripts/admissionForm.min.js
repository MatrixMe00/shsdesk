function admissionFormButtonChange(){total=$(".tabs").children("span.tab_button").length;for(var e=1;e<=total;e++){if($(".tabs span.tab_button:nth-child("+e+")").hasClass("active")&&e<total){$("button[name=submit_admission] span").html("Next"),$("button[name=submit_admission]").prop("disabled",checkForm(e)),admission_button_tab_index=e;break}if($(".tabs span.tab_button:nth-child("+e+")").hasClass("active")&&e==total){$("button[name=submit_admission] span").html("Save"),$("button[name=submit_admission]").prop("disabled",checkForm(e));break}}}var admission_button_tab_index=1,url=location.protocol+"//"+location.host+"/"+location.pathname.split("/")[1];$(document).ready(function(){$("span.tab_button:nth-child(1)").click(),$("form[name=admissionForm] button[name=modal_cancel]").click()}),$("select[name=ad_month]").change(function(){if(html1="<option value=''>Select Your Day of Birth</option>",$("select[name=ad_day]").html(html1),""!=$("select[name=ad_year]").val()){days=31,this_month=parseInt($(this).val()),lunar_year=parseInt($("select[name=ad_year]").val()%4),0==lunar_year&&(lunar_year=parseInt($("select[name=ad_year]").val()%400)),4==this_month||6==this_month||9==this_month||11==this_month?days=30:2==this_month&&0==lunar_year?days=29:2==this_month&&0!=lunar_year&&(days=28);for(var e=1;e<=days;e++)new_option="<option value='"+e+"'>"+e+"</option>",$("select[name=ad_day]").append(new_option)}}),$("select[name=ad_year]").change(function(){""!=$("select[name=ad_month]").val()?$("select[name=ad_month]").change():(html1="<option value=''>Select Your Day of Birth</option>",$("select[name=ad_day]").html(html1))}),$("button[name=modal_cancel]").click(function(){if(admission_button_tab_index=1,$(this).parents(".form_modal_box").addClass("no_disp"),"payment_form"==$(this).parents(".form_modal_box").prop("id")){$("form[name=paymentForm] input").prop("disabled",!1),$("form[name=paymentForm]")[0].reset(),$("button[name=student_cancel_operation]").click(),$("#pay_amount").prop("readonly",!0);const e=$("form[name=paymentForm] input#pay_amount").attr("data-init");$("form[name=paymentForm] input#pay_amount").val("GHC "+e)}else if("admission"==$(this).parents(".form_modal_box").prop("id")){$("#ad_index").prop("readonly",!1),$("form[name=admissionForm] label[for=continue]").removeClass("no_disp"),$("form[name=admissionForm] label[for=submit_admission]").addClass("no_disp"),$("button[name=submit_admission]").prop("disabled",!0).prop("type","button"),$(".tabs span.tab_button").addClass("no_disp").removeClass("incomplete"),$(".tabs span.tab_button:first-child").removeClass("no_disp").click(),resetAccepts(),$("form[name=admissionForm]")[0].reset(),$("#interest").val(""),$("#admission input[required], #admission input.required").blur(),$("#admission select[required], #admission select.required").change();const e=$("form[name=paymentForm] input#pay_amount").attr("data-init");$("form[name=paymentForm] input#pay_amount").val("GHC "+e)}}),$("button[name=submit_admission]").click(function(){total=$(".tabs").children("span.tab_button").length,admission_button_tab_index<total&&(admission_button_tab_index+=1),$(".tabs span.tab_button:nth-child("+admission_button_tab_index+")").click()}),$("label[for=agree]").click(function(){check=$("label[for=agree] input[name=agree]").prop("checked"),0==check?($("button[name=submit_admission]").prop("type","button"),$("button[name=print_summary]").prop("disabled",!0)):1==check&&($("button[name=submit_admission]").prop("type","submit"),$("button[name=print_summary]").prop("disabled",!1)),$("button[name=submit_admission]").prop("disabled",!check)}),$("input.tel").keyup(function(){val=$(this).val(),maxlength=10,"+"==val[0]&&val.includes(" ")?maxlength=16:"+"!=val[0]||val.includes(" ")?"0"==val[0]&&val.includes(" ")?maxlength=12:"0"!=val[0]||val.includes(" ")?$(this).val(""):maxlength=10:maxlength=13,$(this).prop("maxlength",maxlength)}),$("input.tel").blur(function(){if(i=0,value=$(this).val(),value.includes(" ")){for(value=value.split(" "),length=0,new_value="";length<value.length;)new_value+=value[length],length++;value=new_value}if("0"==value[0]){for(new_val="+233",i=1;i<=9;)new_val+=value[i],i++;value=new_val}$(this).val(value)}),$(".tabs span.tab_button").click(function(){$(".tabs span.tab_button").removeClass("active"),$(this).addClass("active"),$(".form_views > div").addClass("no_disp"),$("#"+$(this).attr("data-views")).removeClass("no_disp"),admissionFormButtonChange()}),$("#admission select").change(function(){admissionFormButtonChange()}),$("#admission input").blur(function(){admissionFormButtonChange()}),$("#view2 .checkbox").click(function(){admissionFormButtonChange()}),$("select[name=ad_health]").change(function(){"yes"==$(this).val()?$("label[for=health_specify]").removeClass("no_disp"):fadeOutElement($("label[for=health_specify]"))}),$("#payment_button, .enrol_button").click(function(){$("#payment_form").removeClass("no_disp").addClass("flex"),$("form[name=admissionForm] #enrol_field").removeClass("no_disp"),$("form[name=paymentForm] #school_choice").html($("#school_admission_case #school_select option:selected").html()),$(".tabs span.tab_button.active").removeClass("no_disp")}),$("#payment_form form input").keyup(function(){""!=$("#pay_fullname").val()&&""!=$("#pay_phone").val()||""!=$("#pay_reference").val()?($("#payment_form form button[name=submit]").prop("disabled",!1),$("#payment_form form label.btn_label img").prop("src",url+"/assets/images/icons/lock-open-outline.svg")):($("#payment_form form button[name=submit]").prop("disabled",!0),$("#payment_form form label.btn_label img").prop("src",url+"/assets/images/icons/lock.png"))}),$("label[for=ad_interest]").click(function(){val=$(this).children("input[type=checkbox]").val(),val_int=$("input[name=interest]").val(),0==$(this).children("input[type=checkbox]").prop("checked")?($(this).children("input[type=checkbox]").prop("checked",!0),""==val_int?val_int=val:val_int+=", "+val):($(this).children("input[type=checkbox]").prop("checked",!1),val_int.includes(",")?(temp_val=val+", ",temp_val2=", "+val,val_int.replace(temp_val2)?val_int=val_int.replace(temp_val2,""):val_int=val_int.replace(temp_val1,"")):val_int=""),$("input[name=interest]").val(val_int),$("#interest_value").html(val_int)}),$("#ad_index").keyup(function(){index_val=$(this).val(),index_val.length>=4?$("button[name=continue]").prop("disabled",!1):$("button[name=continue]").prop("disabled",!0)}),$("button[name=continue]").click(function(){index_number=$("#ad_index").val(),school_id=$("#student #school_select").val(),dataString="submit=getStudentIndex&index_number="+index_number+"&school_name="+$("#school_admission_case #school_select option:selected").html()+"&school_id="+school_id,$.ajax({url:$("form[name=admissionForm]").attr("action"),type:"GET",data:dataString,dataType:"json",cache:!0,async:!1,timeout:8e3,beforeSend:function(){$("#view1 .para_message").html("Checking index number, please wait..."),alert_box("Retrieving CSSPS data...","secondary",2)},success:function(e){$("#view1 .para_message").html("Parts with * means they are required fields"),data=JSON.parse(JSON.stringify(e)),"success"==data.status?($("form[name=admissionForm] #ad_aggregate").val(data.aggregate),$("form[name=admissionForm] #ad_course").val(data.programme),$("form[name=admissionForm] #ad_lname").val(data.Lastname),$("form[name=admissionForm] #ad_oname").val(data.Othernames),$("form[name=admissionForm] #ad_gender").val(data.Gender),$("form[name=admissionForm] #ad_jhs").val(data.jhsAttended),$("form[name=admissionForm] #ad_lname, form[name=admissionForm] #ad_oname, form[name=admissionForm] #ad_jhs").blur(),$("form[name=admissionForm] #ad_gender").change(),$("#res_ad_aggregate").html(data.aggregate),$("#res_ad_course").html(data.programme),$("#res_ad_lname").html(data.Lastname),$("#res_ad_oname").html(data.Othernames),$("#res_ad_gender").html(data.Gender),$("#fullCandidateName").html(data.Lastname+" "+data.Othernames),$("form[name=admissionForm] label[for=continue]").addClass("no_disp"),$("label[for=submit_admission]").removeClass("no_disp"),$("form[name=admissionForm] fieldset").removeClass("no_disp"),$("form[name=admissionForm] #enrol_field label").removeClass("no_disp"),$("#shs_placed").val($("#school_admission_case #school_select option:selected").html()),$("#res_shs_placed").html($("#shs_placed").val()),$("#ad_index").prop("readonly",!0),alert_box("CSSPS data has been filled","success",1.5),$("#admission").removeClass("no_disp")):"wrong-school-select"==data.status?($("#view1 .para_message").html("Incorrect school chosen. Select your right school to continue and enter your transaction ID to continue"),$("form[name=admissionForm] button[name=continue]").prop("disabled",!0),$("#ad_enrol").prop("readonly",!0),$("button[name=modal_cancel]").prop("disabled",!0),setTimeout(function(){$("#view1 .para_message").html("Parts with * means they are required fields"),$("form[name=admissionForm] button[name=continue]").prop("disabled",!1),$("#ad_enrol").prop("readonly",!1),$("button[name=modal_cancel]").prop("disabled",!1),$("form button[name=modal_cancel]").click()},5e3)):"wrong-index"==data.status?($("#view1 .para_message").html("Incorrect or invalid index number provided. Please check and try again"),$("form[name=admissionForm] button[name=continue]").prop("disabled",!0),$("#ad_enrol").prop("readonly",!0),$("button[name=modal_cancel]").prop("disabled",!0),setTimeout(function(){$("form[name=admissionForm] button[name=continue]").prop("disabled",!1),$("#ad_enrol").prop("readonly",!1),$("button[name=modal_cancel]").prop("disabled",!1)},3e3),setTimeout(function(){$("#view1 .para_message").html("Parts with * means they are required fields")},5e3)):"already-registered"==data.status?($("#view1 .para_message").html("You are identified as having enrolled already. Please go to shsdesk.com/student to access your documents"),$("form[name=admissionForm] button[name=continue]").prop("disabled",!0),$("#ad_enrol").prop("readonly",!0),$("button[name=modal_cancel]").prop("disabled",!0),setTimeout(function(){$("form[name=admissionForm] button[name=continue]").prop("disabled",!1),$("#ad_enrol").prop("readonly",!1),$("button[name=modal_cancel]").prop("disabled",!1)},3e3),setTimeout(function(){$("#view1 .para_message").html("Parts with * means they are required fields")},7e3)):alert_box("Your data could not be retrieved. Please try again with your transaction ID","warning",7)},error:function(e,a){let n=JSON.stringify(e);"timeout"==a&&(n="Connection was timed out due to a slow network. Please try again later"),$("#view1 .para_message").html(n),setTimeout(function(){$("#view1 .para_message").html("Parts with * means they are required fields")},5e3)}})}),$("form[name=admissionForm] button[name=modal_cancel]").click(function(){$("button[name=continue]").removeClass("no_disp"),$("label[for=submit_admission]").addClass("no_disp"),$("form[name=admissionForm] fieldset").addClass("no_disp"),$("form[name=admissionForm] fieldset#enrol_field").removeClass("no_disp"),$("form[name=admissionForm] #enrol_field label").addClass("no_disp"),$("form[name=admissionForm] #enrol_field label[for=ad_index]").removeClass("no_disp"),$("#ad_index").prop("readonly",!1)}),$("form[name=admissionForm]").submit(function(e){for(e.preventDefault(),dataString="shs_placed="+$("#shs_placed").val()+"&ad_index="+$("#ad_index").val()+"&ad_aggregate="+$("#ad_aggregate").val()+"&ad_course="+$("#ad_course").val()+"&ad_jhs="+$("#ad_jhs").val()+"&ad_transaction_id="+$("#ad_transaction_id").val(),form_data=$(this).serializeArray(),split_lenght=form_data.length,formData="",counter=0;counter<split_lenght;)new_data=form_data[counter],key=new_data.name,value=new_data.value,""!=formData?formData+="&"+key+"="+value:formData=key+"="+value,counter++;$(this).serialize().includes("&submit=")||(formData+="&submit="+$("form[name=admissionForm] button[name=submit_admission]").val()+"_ajax"),formData+="&"+dataString,$.ajax({url:$(this).attr("action"),data:formData,method:"post",dataType:"text",cache:!1,async:!1,timeout:8e3,beforeSend:function(){message=loadDisplay({size:"small"}),type="load",time=0,messageBoxTimeout("admissionForm",message,type,time)},success:function(e){time=5,"success"==e||e.includes("success")?(message="Enrolment was successful. Please wait as your letters are prepared",type="success",messageBoxTimeout("admissionForm",message,type,3),setTimeout(function(){$("#handle_pdf")[0].click(),$("button[name=modal_cancel]").click()},3e3)):(response=e,type="error","no-transaction-id"==response?(message="No transaction id was provided",i=1):"no-index-number"==response?(message="No index number was provided",i=1):"no-enrolment-code"==response?(message="No enrolment code was provided",i=1,$("#ad_enrol_code").focus()):"enrolment-code-short"==response?(message="Your enrolment code should be 10 characters long",i=1,$("#ad_enrol_code").focus()):"enrolment-code-exist"==response?(message="The enrolment code <b>'"+$("#ad_enrol_code").val()+"'</b> already exists. Please check your placement form and provide a valid one",i=1,$("#ad_enrol_code").focus()):"wrong-school"==response?(message="Error with school name. Please report to admin",i=1):"no-aggeregate-score"==response?(message="Please enter your aggregate score",i=1):"no-course-set"==response?(message="Please provide the name of your selected program",i=1):"no-lname-set"==response?(message="Please provide your last name",i=1):"no-oname-set"==response?(message="Please provide your other name(s)",i=1):"no-gender-set"==response?(message="Please select your gender",i=1):"no-jhs-name-set"==response?(message="Please provide the name of your JHS",i=1):"no-jhs-town-set"==response?(message="Please provide the town in which JHS is found",i=1):"no-jhs-district-set"==response?(message="Please provide the district of your JHS",i=1):"no-year-set"==response?(message="Please select your year of birth",i=1):"no-month-set"==response?(message="Please select your month of birth",i=1):"no-day-set"==response?(message="Please select your day of birth",i=1):"no-birth-place-set"==response?(message="Please enter your place of birth",i=1):"no-father-name"==response?(message="Please provide your father's name",i=2):"no-f-occupation-set"==response?(message="Please provide your father's occupation",i=2):"no-mother-name"==response?(message="Please provide your mother's name",i=2):"no-m-occupation-set"==response?(message="Please provide your mother's occupation",i=2):"no-elder-name"==response?(message="Please provide your father, mother or a guardian",i=2):"no-residence-set"==response?(message="Please provide your residential address",i=2):"no-p-p-set"==response?(message="Please select your primary phone number",i=2):"p-p-short"==response?(message="Primary phone number is shorter than normal",i=2):"p-p-long"==response?(message="Primary phone number is longer than normal",i=2):"s-p-short"==response?(message="Secondary phone number is shorter than normal",i=2):"s-p-long"==response?(message="Secondary phone number is longer than normal",i=2):"no-interest-set"==response?(message="Please select at least one interest",i=2):"no-witness-set"==response?(message="Please provide a witness' name",i=2):"no-witness-phone"==response?(message="Please provide your witness' phone number",i=2):"witness-phone-long"==response?(message="Witness' phone number is longer than normal",i=2):"witness-phone-short"==response?(message="Witness' phone number is shorter than normal",i=2):(message=response,time=0),$(".tabs span.tab_button:nth-child("+i+")").click(),messageBoxTimeout("admissionForm",message,type,time))},error:function(e,a){let n="";n="timeout"==a?"Connection was timed out due to a slow network. Please try again later":"Please check your internet connection and try again",type="error",messageBoxTimeout(form_element.prop("name"),n,type)}})}),$(".tab_button").click(function(){id=$(this).attr("id"),"sumView"==id?$("label[for=print_summary]").removeClass("no_disp"):$("label[for=print_summary]").addClass("no_disp")}),$("label[for=print_summary] button").click(function(){html=$("#"+$("#sumView").attr("data-views")).html(),index=$("input#ad_index").val(),$.ajax({url:"customPdfGenerator.php",data:{admission_print:!0,html:html,ad_index:index},type:"POST",cache:!0,timeout:8e3,success:function(e){alert_box("Your document is ready","primary"),alert_box(e,"secondary")},error:function(e,a){e=JSON.stringify(e),"timeout"==a&&(e="Connection was timed out due to a slow network. Please try again later"),alert_box(e,"error",10)}})});