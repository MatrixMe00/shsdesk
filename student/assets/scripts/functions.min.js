function loadDisplay(e={size:"",display:"",animation:"",full:!1,circular:!1,span1:"",span2:"",span3:"",span4:"",circleColor:""}){return null!=e.size&&""!=e.size||(wide=$(window).width(),wide<480?e.size="vsmall":wide<720?e.size="small":e.size="med"),null!=e.animation&&""!=e.animation||(e.animation="anim-swing"),null!=e.display&&""!=e.display||(e.display="semi-round"),null!=e.span1&&""!=e.span1||(e.span1="red"),null!=e.span2&&""!=e.span2||(e.span2="yellow"),null!=e.span3&&""!=e.span3||(e.span3="green"),null!=e.span4&&""!=e.span4||(e.span4="teal"),e.full?fullClass="full":fullClass="",null!=e.circleColor&&""!=e.circleColor||(e.circleColor="dark"),e.circular?load='<div class="loader '+fullClass+' circle-loader flex anim-fade" style="--c:8">\n<div class="span-container flex">\n<span class="stroke '+e.display+" "+e.circleColor+'" style="--i:0"></span>\n<span class="stroke '+e.display+" "+e.circleColor+'" style="--i:1"></span>\n<span class="stroke '+e.display+" "+e.circleColor+'" style="--i:2"></span>\n<span class="stroke '+e.display+" "+e.circleColor+'" style="--i:3"></span>\n<span class="stroke '+e.display+" "+e.circleColor+'" style="--i:4"></span>\n<span class="stroke '+e.display+" "+e.circleColor+'" style="--i:5"></span>\n<span class="stroke '+e.display+" "+e.circleColor+'" style="--i:6"></span>\n<span class="stroke '+e.display+" "+e.circleColor+'" style="--i:7"></span>\n</div>\n</div>':load='<div class="loader flex '+e.animation+" "+fullClass+'" style="--c:4">\n<div class="span-container flex">\n<span class="'+e.size+" "+e.display+" "+e.span1+'" style="--i:0"></span>\n<span class="'+e.size+" "+e.display+" "+e.span2+'" style="--i:1"></span>\n<span class="'+e.size+" "+e.display+" "+e.span3+'" style="--i:2"></span>\n<span class="'+e.size+" "+e.display+" "+e.span4+'" style="--i:3"></span>\n</div>\n</div>\n',load}function toFormData(e){const a=e.length;let t=new FormData,s=0;for(;s<a;)new_data=form_data[s],key=new_data.name,value=new_data.value,t.append(key,value),s++;return t}async function fileUpload(e,a,t,s=!0){return formData=new FormData,file=$(e).prop("files")[0],file_name=$(e).attr("name"),submit_value=$(t).prop("value"),form_data=$(a).serializeArray(),formData=toFormData(form_data),formData.append(file_name,file),$(a).serialize().includes("&submit=")||formData.append("submit",submit_value+"_ajax"),response=null,$.ajax({url:$(a).attr("action"),data:formData,method:$(a).attr("method")?$(a).attr("method"):"POST",dataType:"text",cache:!1,async:!1,contentType:!1,processData:!1,timeout:8e3,beforeSend:function(){s&&(message=loadDisplay({size:"small"}),type="load",time=0,messageBoxTimeout(a.prop("name"),message,type,time))},success:function(e){$("form[name="+$(a).prop("name")+"] .message_box").addClass("no_disp"),response="success"==e||e},error:function(e,t){message=JSON.parse(JSON.stringify(e)),"timeout"===t&&(message="Connection was timed out due to a slow network. Please try again later"),type="error",messageBoxTimeout(a.prop("name"),message,type)}}),response}async function jsonFileUpload(e,a,t,s=!0){return formData=new FormData,file=$(e).prop("files")[0],file_name=$(e).attr("name"),submit_value=$(t).prop("value"),form_data=$(a).serializeArray(),formData=toFormData(form_data),formData.append(file_name,file),$(a).serialize().includes("&submit=")||formData.append("submit",submit_value+"_ajax"),response=null,$.ajax({url:$(a).attr("action"),data:formData,method:$(a).attr("method")?$(a).attr("method"):"POST",dataType:"json",cache:!1,async:!1,contentType:!1,processData:!1,timeout:8e3,beforeSend:function(){s&&(message=loadDisplay({size:"small"}),type="load",time=0,messageBoxTimeout(a.prop("name"),message,type,time))},success:function(e){$("form[name="+$(a).prop("name")+"] .message_box").addClass("no_disp"),e=JSON.parse(JSON.stringify(e)),"success"==e.status||e.status.includes("success")?response=!0:response=e},error:function(e,t){message="Please check your internet connection and try again","timeout"==t&&(messgae="Connection was timed out due to a slow network. Please try again later"),type="error",s&&messageBoxTimeout(a.prop("name"),message,type)}}),response}function formSubmit(e,a,t=!0){for(submit=$(a).val(),form_data=$(e).serializeArray(),split_lenght=form_data.length,formData="",counter=0;counter<split_lenght;)new_data=form_data[counter],key=new_data.name,value=new_data.value,""!=formData?formData+="&"+key+"="+value:formData=key+"="+value,counter++;return $(e).serialize().includes("&submit=")||(formData+="&submit="+submit+"_ajax"),response=null,$.ajax({url:$(e).attr("action"),data:formData,method:$(e).attr("method")?$(e).attr("method"):"POST",dataType:"text",cache:!1,async:!1,timeout:8e3,beforeSend:function(){t&&(message=loadDisplay({size:"small"}),type="load",time=0,messageBoxTimeout(e.prop("name"),message,type,time))},success:function(a){$("form[name="+$(e).prop("name")+"] .message_box").addClass("no_disp"),"success"==a||a.includes("success")?response=!0:response=a},error:function(a,t){message="Please check your internet connection and try again",type="error","timeout"==t&&(message="Connection was timed out due to a slow network. Please try again later"),messageBoxTimeout(e.prop("name"),message,type)}}),response}async function jsonFormSubmit(e,a,t=!0){for(submit=$(a).val(),form_data=$(e).serializeArray(),split_lenght=form_data.length,formData="",counter=0;counter<split_lenght;)new_data=form_data[counter],key=new_data.name,value=new_data.value,""!=formData?formData+="&"+key+"="+value:formData=key+"="+value,counter++;$(e).serialize().includes("&submit=")||(formData+="&submit="+submit+"_ajax");let s=null;return await $.ajax({url:$(e).attr("action"),data:formData,method:$(e).attr("method")?$(e).attr("method"):"POST",dataType:"json",cache:!1,timeout:8e3,beforeSend:function(){t&&(message=loadDisplay({size:"small"}),type="load",time=0,messageBoxTimeout(e.prop("name"),message,type,time))},success:function(a){$("form[name="+$(e).prop("name")+"] .message_box").addClass("no_disp"),a=JSON.parse(JSON.stringify(a)),"boolean"==typeof a.status?s=a:"string"==typeof a.status&&(s=!("success"!=a.status&&!a.status.includes("success"))||a)},error:function(a,s){message=JSON.stringify(a),type="error","timeout"===s&&(message="Connection was timed out due to a slow network. Please try again later"),t&&messageBoxTimeout(e.prop("name"),message,type,0)}}),s}function alert_box(e,a="primary",t=5){$("body").find("#alert_modal").length<1&&(alert_modal='<div id="alert_modal" class="fixed flex flex-column flex-align-end"></div>',$("body").append(alert_modal)),my_number=$("#alert_modal").children(".alert_box").length,box='<div class="alert_box '+a+'" id="alert_box'+(my_number+1)+'"> <div class="message">     <span>'+e+"</span> </div></div>",$("#alert_modal").append(box),removeAlert("alert_box"+(my_number+1),t)}function removeAlert(e,a){a>0&&setTimeout(function(){$("#"+e).remove()},1e3*a)}function removeAlert(e,a){a>0&&setTimeout(function(){$("#"+e).remove()},1e3*a)}function selectChartColors(e,a=0){var t=[];const s=["line","scatter"];if(s.includes(e.toLowerCase())||1===a){let e=parseInt(1e3*Math.random()%chartColors.length);t.push(chartColors[e])}else if(a>1){let e=[],s=0;for(;s<a;){let a=parseInt(1e3*Math.random()%chartColors.length);e.includes(a)||(e.push(a),t.push(chartColors[a]),++s)}}return t}function giveGrade(e,a="wassce"){let t="";switch(a){case"wassce":t=e>=80?"A1":e>=70?"B2":e>=65?"B3":e>=60?"C4":e>=55?"C5":e>=50?"C6":e>=45?"D7":e>=40?"E8":"F9";break;case"ctvet":t=e>=80?"D":e>=60?"C":e>=40?"P":"F"}return t}function isJSON(e){let a=!1;try{JSON.parse(JSON.stringify(e));a=!0}catch(e){a=!1}return a}function fillTable({table_id:e,result_data:a,first_countable:t=!0,has_mark:s,mark_index:n,mark_first:r=!1,mark_result_type:o="wassce"}){const l=$("#"+e).find("tbody");$(l).html("");const m="object"==typeof a[0];let c=!1;if(null!==m&&m){const e=Object.keys(a[0]);for(i=0;i<a.length;i++){for(tr="<tr>",t&&(tr+="<td>"+(i+1)+"</td>",n&&!c&&(--n,c=!0)),j=0;j<e.length;j++)s&&n-1==j&&!1===r&&(tr+="<td>"+giveGrade(a[i][e[j]],o)+"</td>"),tr+="<td>"+a[i][e[j]]+"</td>",s&&n-1==j&&!0===r&&(tr+="<td>"+giveGrade(a[i][e[j]],o)+"</td>",alert_box("grade last"));tr+="</tr>",$(l).append(tr)}}else alert_box("Table cannot be populated because there are no keys to generate for a table","warning color-black",10)}function formatItemId(e,a,t=!1){return t?(e=e.toUpperCase(),e=e.replace(a,"").replace(" ",""),e=parseInt(e)):(e=e.toString().padStart(4,"0"),e=`${a} ${e}`),e}function yearBind(e,a){return"Year"+e+" S"+a}function generateChart(e,{arrayData:a,chartID:t,chartType:s="line",mainLabel:n="Subjects",isMarks:r=!0}){const o=s;var l=selectChartColors(o,5),i=[],m=[];if(r)for(var c=0;c<a.length;c++)i.push(yearBind(a[c].exam_year,a[c].semester)),m.push(a[c].mark);else for(c=0;c<a.length;c++)i.push(a[c].course_name),m.push(a[c].mark);var p={type:o,data:{labels:i,datasets:[{label:n,backgroundColor:l,borderColor:l,data:m}]},options:{}};if(null!=e){var d=Chart.instances[e.id];console.log(d),d&&d.destroy()}return e=new Chart(document.getElementById(t),p),e}chartColors=["#007bff","#6610f2","#6f42c1","#e83e8c","#dc3545","#fd7e14","#ffc107","#28a745","#20c997","#17a2b8","#6c757d","#343a40","#EF5777","#575FCF","#48D0FA","#35E7E4","#0CE881","#F53B57","#3D40C6","#10BCF9","#00D8D6","#04C56B","#FFC048","#FFDD59","#FF5E58","#48545F","#FFA8D0","#FFD32A","#FF3F34","#818E98","#182027"];