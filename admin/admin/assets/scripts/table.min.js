$("table tbody tr .edit").click(function(){cssps=!1,student=!1,db="",$(this).hasClass("cssps")?cssps=!0:$(this).hasClass("studs")&&(student=!0),$(this).hasClass("db2")&&(db="shsdesk2"),id_number=$(this).parents("tr").attr("data-index"),dataString="",cssps?(registered=$(this).parents("tr").attr("data-register"),dataString="index_number="+id_number+"&registered="+registered+"&submit=fetchStudentDetails"):student&&(dataString="index_number="+id_number+"&submit=fetchStudentsDetail"),dataString+="&db="+db,$("#updateStudent").removeClass("no_disp"),$("#updateStudent form").addClass("no_disp"),$("#updateStudent #getLoader").parent().removeClass("no_disp").addClass("flex"),$("#updateStudent #getLoader").removeClass("no_disp").html(loadDisplay({circular:!0,circleColor:"light"})),action=$("form[name=adminUpdateStudent]").attr("action"),$.ajax({url:action,type:"post",data:dataString,dataType:"json",cache:!0,timeout:8e3,success:function(e){e=JSON.parse(JSON.stringify(e)),"success"==e.status?($("#updateStudent #getLoader").parent().addClass("no_disp").removeClass("flex"),$("#updateStudent #getLoader").html(""),$("form[name=adminUpdateStudent] input[name=student_index]").val(e.indexNumber),$("form[name=adminUpdateStudent] input[name=lname]").val(e.Lastname),$("form[name=adminUpdateStudent] input[name=oname]").val(e.Othernames),$("form[name=adminUpdateStudent] select[name=gender]").val(e.Gender),$("form[name=adminUpdateStudent] select[name=house]").val(e.houseID),cssps?("true"==registered?($("form[name=adminUpdateStudent] select[name=house]").prop("disabled",!1),$("form[name=adminUpdateStudent] label[for=house], form[name=adminUpdateStudent] label[for=enrolCode]").removeClass("no_disp"),$("form[name=adminUpdateStudent] input[name=enrolCode]").val(e.enrolCode)):($("form[name=adminUpdateStudent] select[name=house]").prop("disabled",!0),$("form[name=adminUpdateStudent] label[for=house], form[name=adminUpdateStudent] label[for=enrolCode]").addClass("no_disp")),$("form[name=adminUpdateStudent] input[name=aggregate]").val(e.aggregate),$("form[name=adminUpdateStudent] input[name=jhs]").val(e.jhsAttended),$("form[name=adminUpdateStudent] input[name=dob]").val(e.dob),$("form[name=adminUpdateStudent] input[name=track_id]").val(e.trackID)):student&&($("form[name=adminUpdateStudent] select, form[name=adminUpdateStudent] input").css("color","black").prop("disabled",!0),$("form[name=adminUpdateStudent] label[for=house]").removeClass("no_disp"),$("form[name=adminUpdateStudent] label[for=aggregate]").hide(),$("form[name=adminUpdateStudent] label[for=jhs]").hide(),$("form[name=adminUpdateStudent] label[for=dob]").hide(),$("form[name=adminUpdateStudent] label[for=track_id]").hide(),$("form[name=adminUpdateStudent] select[name=program_id]").val(e.program_id),$("form[name=adminUpdateStudent] select[name=year_level]").val(e.studentYear),$("form[name=adminUpdateStudent] button[name=submit]").prop("disabled",!0)),$("form[name=adminUpdateStudent] input[name=student_course]").val(e.programme),$("form[name=adminUpdateStudent] select[name=boarding_status]").val(e.boardingStatus),$("#updateStudent form").removeClass("no_disp")):"no-result"==e.status&&student?(alert_box("Data for requested student could not be found","danger",7),$("form[name=adminUpdateStudent] button[name=cancel]").click()):(alert_box("Requested data could not be found","danger"),$("form[name=adminUpdateStudent] button[name=cancel]").click())},error:function(e,t){"timeout"===t?alert_box("Connection was timed out or was slow. Please try again.","danger",10):"no-submission"==e.responseText?alert_box("No submission was detected. Please try again later","danger",7):(alert_box("Invalid request to server or an error occurred on the server. Response sent to console. Ask admin for help","danger",12),console.log(e.responseText)),$("form[name=adminUpdateStudent] button[name=cancel]").click()}})}),$("table tbody tr .delete").click(function(){cssps=!1,student=!1,db="",$(this).hasClass("cssps")?cssps=!0:$(this).hasClass("studs")&&(student=!0),$(this).hasClass("db2")&&(db="shsdesk2"),item_id=$(this).parents("tr").attr("data-index"),cssps?fullname=$(this).parents("tr").children("td.fullname").html():student&&(fullname=$(this).parents("tr").children("td.lname").html()+" "+$(this).parents("tr").children("td.oname").html()),$("#table_del").removeClass("no_disp"),$("#table_del p#warning_content").html("Do you want to remove <b>"+fullname+"</b> from your records?"),$("#table_del input[name=indexNumber]").val(item_id),$("#table_del input[name=db]").val(db)}),$("button#del_all").click(function(){item_id="all",fullname="all records".toUpperCase(),message="",$("#table_del").removeClass("no_disp"),$(this).hasClass("studs")?(message="This will clear all <b>THIRD YEARS</b> from the system, and in turn promote all <b>STUDENTS</b> in the system currently to the next class<br>Are you sure you want to proceed?",$("#table_del input[name=db]").val("shsdesk2")):(message="Are you sure you want to remove <b>"+fullname+"</b> from your database?",$("#table_del input[name=db]").val("")),$("#table_del p#warning_content").html(message),$("#table_del input[name=indexNumber]").val(item_id)}),$("#table_del form").submit(function(e){e.preventDefault(),"true"==$("form[name=table_yes_no_form] input[name=addFirstYears]").val()?$("form[name=table_yes_no_form] input[name=submit]").val("addFirstYears"):$("form[name=table_yes_no_form] input[name=submit]").val("table_yes_no_submit"),response=formSubmit($(this),$("form[name=table_yes_no_form] input[name=submit]",!1)),1==response?("all"==$("#table_del input[name=indexNumber]").val()&&$("#lhs .menu .item.active").click(),"true"==$("form[name=table_yes_no_form] input[name=addFirstYears]").val()&&$("form[name=table_yes_no_form] input[name=submit]").val("table_yes_no_submit"),registered=$("tr[data-index="+$("#table_del input[name=indexNumber]").val()+"]").attr("data-register"),$("tr[data-index="+$("#table_del input[name=indexNumber]").val()+"]").remove(),cssps_head=$(".content.cssps .head h2"),comp_head=$(".content.reg_comp .head h2"),not_comp_head=$(".content.reg_uncomp .head h2"),$(cssps_head).html(parseInt($(cssps_head).html())-1),"true"==registered?$(comp_head).html(parseInt($(comp_head).html())-1):$(not_comp_head).html(parseInt($(not_comp_head).html())-1)):alert_box(response,"danger",10),$("#table_del form")[0].reset(),$("#table_del").addClass("no_disp")}),$("form[name=adminUpdateStudent] button[name=cancel]").click(function(){$("#updateStudent").addClass("no_disp"),$("#updateStudent #getLoader").parent().addClass("no_disp").removeClass("flex"),$("#updateStudent #getLoader").html("")}),$("#updateStudent .item-event").click(function(){$("form[name=adminUpdateStudent] button[name=cancel]").click()});