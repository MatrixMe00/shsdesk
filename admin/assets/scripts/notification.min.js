$(".replies").click(function(){parent=$(this).parents(".notif_box"),$(parent).children(".reply_container").removeClass("no_disp"),username=$(this).children(".reply_label").attr("data-sender-name"),placeholder="Reply "+username+"...",$(parent).children(".reply_container").children(".reply_tab").children("label").children("input[name=reply]").prop("placeholder",placeholder),id=$(this).attr("data-sender-id"),$(parent).children(".reply_container").children(".reply_tab").children("input[name=recepient_id]").val(id),$(this).hide(),$(this).siblings(".close_reply").removeClass("no_disp")}),$(".close_reply").click(function(){parent=$(this).parents(".notif_box"),reply_container=$(parent).children(".reply_container").addClass("no_disp"),$(this).addClass("no_disp"),$(this).siblings(".replies").show(function(){$(this).siblings(".replies").css("display","inline-flex")}),$(parent).children(".reply_container").children(".reply_box.display_now").removeClass("display_now")}),$("#audience_others, #audience_all").change(function(){check=$("#audience_others").prop("checked"),1==check?$("#aud_ot_label").removeClass("no_disp"):$("#aud_ot_label").addClass("no_disp")}),$("label[for=audience]").click(function(){radio=$(this).children("input[type=radio]"),check=$(radio).prop("checked"),check||($(radio).prop("checked",!0),$("#audience_others, #audience_all").change())}),$("button[name=cancel]").click(function(){fadeOutElement($(this).parents(".form_modal_box"),.2)}),$("button[name=btn_announce]").click(function(){$("#announcement").removeClass("no_disp")}),$("button[name=fetch_requests]").click(function(){$("#lhs .item[name=Request]").click()}),$("button[name=fetch_reports]").click(function(){$("#lhs .item[name=Report]").click()}),$("form[name=announcementForm]").submit(function(e){e.preventDefault(),reply=formSubmit($(this),$("form[name=announcementForm] button[name=submit]")),1==reply?(message="Announcement Made Successfully",type="success",time=5,messageBoxTimeout($(this).prop("name"),message,type,time),setTimeout(function(){$("form[name=announcementForm] button[name=cancel]").click(),$("#lhs .item.active").click()},6e3)):(type="error",time=5,"no-title"==reply?message="Please provide a title for the announcement":"no-message"==reply?message="No description was provided for your announcement":"notification-type-not-set"==reply?message="No announcement type was specified. Contact the super admin":message=reply,messageBoxTimeout($(this).prop("name"),message,type,time))}),$(".reply-reply").click(function(){username=$(this).attr("data-sender-name"),placeholder="Reply "+username+"...",$(this).parents(".reply_box").siblings(".reply_tab").children("label").children("input[name=reply]").attr("placeholder",placeholder),id=$(this).attr("data-sender-id"),$(this).parents(".reply_box").siblings(".reply_tab").children("input[name=recepient_id]").val(id)}),$(".reply_tab label[for=submit] button[name=submit]").click(function(){var e;parent=$(this).parents(".reply_tab"),reply=$(parent).children("label[for=reply]").children("input[name=reply]").val(),comment_id=$(parent).children("input[name=comment_id]").val(),user_id=$(parent).children("input[name=user_id]").val(),recepient_id=$(parent).children("input[name=recepient_id]").val(),school_id=$(parent).children("input[name=school_id]").val(),submit=$(this).val()+"_ajax",dataString="reply="+reply+"&comment_id="+comment_id+"&recepient_id="+recepient_id+"&user_id="+user_id+"&school_id="+school_id+"&submit="+submit,""!=reply&&reply.length>=2?$.ajax({url:$(parent).attr("data-action"),data:dataString,cache:!0,type:$(parent).attr("method"),dataType:"json",async:!1,timeout:15e3,beforeSend:function(){$(parent).children("label[for=reply]").children("input[name=reply]").prop("disabled",!0),$(this).prop("disabled",!0),$(parent).siblings(".load_message").fadeIn().addClass("light").html("Loading...")},success:function(n){n=JSON.parse(JSON.stringify(n)),e=n,"success"==n.status?($(parent).children("label[for=reply]").children("input[name=reply]").val(""),$(parent).siblings(".load_message").removeClass("light danger").addClass("success").html("Reply sent"),setTimeout(function(){$(parent).siblings(".load_message").removeClass("success").fadeOut().html("")},4e3)):(message=n.message,"no-reply"==message?message="No message was detected. Please enter a message":"reply-short"==message?message="Message lentgh unacceptable. Enter at least two characters":"no-comment-id"==message?message="Notification for this message could not be found. Error!":"no-user-id"==message?message="Please reload the page to see if you are logged in":"no-recepient-id"==message?message="No recepient was detected":"same-user"==message&&(message="Disallowed! You cannot reply yourself"),$(parent).siblings(".load_message").removeClass("light success").addClass("danger").fadeIn().html(message),setTimeout(function(){$(parent).siblings(".load_message").removeClass("danger").fadeOut().html("")},5e3))},complete:function(){$(parent).children("label[for=reply]").children("input[name=reply]").prop("disabled",!1),$(this).prop("disabled",!1)},error:function(e,n){e=JSON.stringify(e),"timeout"&&(e="Connection was timed out due to slow network. Please try again later."),alert_box(e,"warning",10),$(parent).children("label[for=reply]").children("input[name=reply]").prop("disabled",!1),$(this).prop("disabled",!1)}}):$(parent).children("label[for=reply]").children("input[name=reply]").focus(),"success"==e.status&&(box='<div class="reply_box display_now">\n<div class="top">\n   <h5>'+e.username+" to "+e.username1+'</h5>\n</div>\n<div class="middle">\n   <p>'+reply+'</p>\n</div>\n<div class="foot">\n   <span class="item-event">Edit</span>\n   <span class="item-event">Delete</span>\n</div>\n</div>',current_number=$(this).parents(".reply_container").children(".reply_box").length,$(this).parents(".notif_box").children(".foot").children(".replies").children(".reply_counts").html(current_number+1),current_number>1?$(this).parents(".notif_box").children(".foot").children(".replies").children(".reply_label").html("Replies"):$(this).parents(".reply_container").children(".body.empty").remove(),$(this).parents(".reply_container").prepend(box))}),$("span.item-event").click(function(){item_id=$(this).attr("data-item-id"),item_event=$(this).attr("data-item-event"),$(this).parents(".reply_container")?table="reply":$(this).parents(".notif_box")&&(table="notification"),"edit"==item_event||("delete"==item_event?($("#gen_del").removeClass("no_disp"),$("#gen_del p#warning_content").html("Do you want to delete this message?"),$("#gen_del input[name=sid]").val(item_id),$("#gen_del input[name=mode]").val(item_event),$("#gen_del input[name=table]").val(table)):"activate"!=item_event&&"deactivate"!=item_event||($("#gen_del").removeClass("no_disp"),item_header=$(this).parents(".item").children(".top").children(".flex").children(".content_title").children("h4").html(),$("#gen_del p#warning_content").html("Do you want to "+item_event+' block titled "<b>'+item_header+'</b>"'),$("#gen_del input[name=sid]").val(item_id),$("#gen_del input[name=mode]").val(item_event),$("#gen_del input[name=table]").val(table)))}),$(".notif_box.unread").mouseleave(function(){var e=parseInt($("#lhs .item.active .news_number span").html());comment_id=$(this).attr("data-box-number"),submit_url=$(this).children(".reply_container").children(".reply_tab").attr("data-action"),dataString="comment_id="+comment_id+"&submit=mark_read",$(this).hasClass("unread")&&$.ajax({url:submit_url,data:dataString,type:"get",dataType:"text",async:!0,timeout:15e3,success:function(n){"success"==n&&($(this).removeClass("unread").addClass("read"),e-1==0&&$("#lhs .item.active .news_number").fadeOut(),$("#lhs .item.active .news_number span").html(e-1))},error:function(e,n){"timeout"==n&&alert_box("Connection was timed out due to slow network. Please try agin later","danger",10)}})});