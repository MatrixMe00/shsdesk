$(document).ready(function(){function e(e){$("#indexNumber").val(e.indexNumber),$("#lname").val(e.Lastname),$("#oname").val(e.Othernames),$("#gender").val(e.Gender),$("#school").val(e.schoolName),$("#school_id").val(e.schoolID),$("#program").val(e.programme),$("#primary_phone").val(e.primaryPhone),$("#secondary_phone").val(e.secondaryPhone),$("#student_house").val(e.house_name),$("#enrol_code").val(e.enrolCode),$("#boarding_status").val(e.boardingStatus),$("#witness_name").val(e.witnessName),$("#witness_phone").val(e.witnessPhone),$("#admission_year").val(e.academic_year);const a="not set"!=e.enrolCode.toLowerCase()?"Enroled":"Not Enroled";$("span#index_number").html(e.indexNumber+" ["+a+"]"),$("#can_activate").prop("disabled",!e.can_activate)}$("form.student_search").submit(async function(a){a.preventDefault();const s=$(this).attr("name");let n=null;if("search-student"==s){const a=$("input#enrolCode").prop("checked")?1:0,s=$("input#enrolCode").prop("checked")?1:0;await $.ajax({url:$(this).attr("action"),data:{submit:$(this).find("button[name=submit]").val(),enrolCode:a,current:s,search:$("#txt_search").val()},dataType:"json",beforeSend:function(){$("section#form").addClass("no_disp"),$("section#loader").removeClass("no_disp").find("#message").html("Searching Student..."),$("form[name=update-student]")[0].reset()},success:function(a){a.error?$("section#loader").find("#message").html(a.data):($("section#loader").addClass("no_disp").find("#message").html(""),e(a.data),$("section#form").removeClass("no_disp"))},error:function(e,a,s){$("section#loader").removeClass("no_disp").find("#message").html(s),console.log(e)}})}else n=formSubmit($(this),$(this).find("button[name=submit]"))}),$("#can_activate").click(function(){const e=confirm("Are you sure you want to allow this student for this year's admission?");if(e){const e=$(this),a=$("#indexNumber").val(),s=$("#admission_year").val();ajaxCall({url:"submit.php",formData:{submit:"activate_student_admission",index_number:a,academic_year:s},method:"POST",returnType:"json",beforeSend:function(){e.prop("disabled",!0).html("Processing...")}}).then(s=>{e.html("Activate").prop("disabled","success"==s.message),s&&("success"==s.message?($("#admission_year").val(s.admission_year),alert_box(a+" has been activated for "+s.admission_year+" admission year","success",6)):alert_box(s.message,"danger"))})}}),$("button#search_result_close").click(function(){$("span#index_number").html(""),$("#form").addClass("no_disp")})});